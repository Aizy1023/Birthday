<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç–¯ç‹‚åŠ¨ç‰©åŸç”Ÿæ—¥æƒŠå–œ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- å¼•å…¥jsPDFåº“ç”¨äºç”ŸæˆPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* å®¹å™¨æ ·å¼ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* è§†é¢‘æ’­æ”¾å™¨åŒºåŸŸ */
        .video-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            background: #000;
        }

        #birthday-video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 20px;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .video-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .play-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border: none;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(238, 90, 36, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(238, 90, 36, 0.6);
        }

        .play-btn i {
            color: white;
            font-size: 30px;
        }

        .play-btn-text {
            font-size: 18px;
            font-weight: 600;
            margin-top: 10px;
        }

        /* å½©è›‹æŒ‰é’®åŒºåŸŸ */
        .egg-button-container {
            position: fixed;
            bottom: 40px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .egg-button-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .egg-button {
            background: linear-gradient(135deg, #ff9a00, #ff6b6b);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 18px 40px;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .egg-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .egg-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.6);
        }

        .egg-button:hover:before {
            left: 100%;
        }

        .egg-button:active {
            transform: translateY(0);
        }

        .egg-button i {
            font-size: 24px;
        }

        /* ä¿¡å°é¡µé¢æ ·å¼ - ä½¿ç”¨2560x1440èƒŒæ™¯å›¾ç‰‡ */
        .letter-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0c2461;
            /* è¿™é‡Œè®¾ç½®ä½ çš„2560x1440èƒŒæ™¯å›¾ç‰‡è·¯å¾„ */
            background-image: url('./videos/ç…§ç‰‡.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            z-index: 200;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
        }

        /* èƒŒæ™¯å›¾ç‰‡é®ç½©ï¼Œç¡®ä¿æ–‡å­—å¯è¯»æ€§ */
        .letter-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(12, 36, 97, 0.7);
            backdrop-filter: blur(3px);
            z-index: 1;
        }

        .letter-page.active {
            opacity: 1;
            pointer-events: all;
        }

        .letter-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 50px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6);
            position: relative;
            transform: scale(0.9);
            opacity: 0;
            transition: transform 0.8s ease, opacity 0.8s ease;
            border: 10px solid transparent;
            background-clip: padding-box;
            background-image: linear-gradient(white, white), 
                              linear-gradient(135deg, #ff9a00, #ff6b6b, #4a69bd);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            z-index: 2;
        }

        .letter-page.active .letter-container {
            transform: scale(1);
            opacity: 1;
        }

        /* ä¿¡ä»¶å†…éƒ¨èƒŒæ™¯æ•ˆæœ */
        .letter-content-wrapper {
            position: relative;
            padding: 20px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8));
            border-radius: 10px;
            box-shadow: inset 0 0 30px rgba(255, 154, 0, 0.1);
        }

        .letter-content-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 154, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 107, 107, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(74, 105, 189, 0.1) 0%, transparent 30%);
            pointer-events: none;
            border-radius: 10px;
        }

        .letter-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .letter-header::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 5px;
            background: linear-gradient(90deg, #ff9a00, #ff6b6b, #4a69bd);
            border-radius: 3px;
            box-shadow: 0 2px 10px rgba(255, 154, 0, 0.3);
        }

        .letter-header h1 {
            color: #0c2461;
            font-size: 42px;
            margin-bottom: 15px;
            font-family: 'Arial Rounded MT Bold', sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, #0c2461 30%, #4a69bd 70%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .letter-header p {
            color: #666;
            font-size: 20px;
            font-style: italic;
            font-weight: 500;
        }

        .letter-content {
            color: #333;
            font-size: 19px;
            line-height: 1.9;
            margin-bottom: 40px;
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }

        .letter-content p {
            margin-bottom: 25px;
            text-align: justify;
            position: relative;
            padding-left: 15px;
        }

        .letter-content p::before {
            content: 'âœ¦';
            position: absolute;
            left: -5px;
            top: 0;
            color: #ff9a00;
            font-size: 14px;
        }

        .letter-content .highlight {
            background: linear-gradient(120deg, rgba(255, 154, 0, 0.2), rgba(255, 107, 107, 0.2));
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: #0c2461;
            border-left: 3px solid #ff9a00;
        }

        .letter-signature {
            text-align: right;
            margin-top: 50px;
            font-family: 'Brush Script MT', cursive;
            font-size: 32px;
            color: #0c2461;
            position: relative;
            padding-right: 40px;
            padding-top: 20px;
            border-top: 2px dashed rgba(255, 154, 0, 0.3);
        }

        .letter-signature::before {
            content: 'âœ¨';
            position: absolute;
            right: 10px;
            top: -5px;
            font-size: 28px;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .letter-actions {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: linear-gradient(135deg, #ff9a00, #ff6b6b);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 18px 35px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b6b, #ff9a00);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.6);
        }

        .action-btn:hover::before {
            opacity: 1;
        }

        .action-btn:active {
            transform: translateY(-2px);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #4a69bd, #1e3799);
            box-shadow: 0 8px 25px rgba(74, 105, 189, 0.4);
        }

        .action-btn.secondary::before {
            background: linear-gradient(135deg, #1e3799, #4a69bd);
        }

        .action-btn.secondary:hover {
            box-shadow: 0 15px 35px rgba(74, 105, 189, 0.6);
        }

        .close-letter {
            position: absolute;
            top: 25px;
            right: 25px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.5);
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-letter:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 12px 25px rgba(255, 107, 107, 0.7);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .video-container {
                border-radius: 10px;
            }
            
            .egg-button {
                padding: 15px 30px;
                font-size: 18px;
            }
            
            .letter-container {
                padding: 25px;
            }
            
            .letter-header h1 {
                font-size: 32px;
            }
            
            .letter-content {
                font-size: 17px;
            }
            
            .letter-signature {
                font-size: 28px;
            }
            
            .action-btn {
                padding: 15px 25px;
                font-size: 16px;
            }
            
            .letter-actions {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
        }

        /* æ ‡é¢˜æ ·å¼ */
        .page-title {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 30px;
        }

        .page-title h1 {
            font-size: 52px;
            background: linear-gradient(135deg, #ff9a00, #ff6b6b, #ff9a00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 5px 15px rgba(255, 154, 0, 0.2);
            font-family: 'Comic Sans MS', cursive;
        }

        .page-title p {
            font-size: 22px;
            opacity: 0.9;
            font-style: italic;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            margin-top: 20px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff9a00, #ff6b6b);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(12, 36, 97, 0.95);
            background-image: url('your-background-image.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .loading-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(12, 36, 97, 0.85);
            backdrop-filter: blur(5px);
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255, 255, 255, 0.2);
            border-top-color: #ff9a00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
            z-index: 1;
        }

        .loading-text {
            color: white;
            font-size: 22px;
            text-align: center;
            z-index: 1;
            font-weight: 500;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* æˆåŠŸæç¤º */
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
            z-index: 1001;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            border: 4px solid transparent;
            background-image: linear-gradient(white, white), 
                              linear-gradient(135deg, #4CAF50, #8BC34A);
            background-origin: border-box;
            background-clip: padding-box, border-box;
            max-width: 90%;
            width: 450px;
        }

        .success-message.active {
            opacity: 1;
            pointer-events: all;
        }

        .success-icon {
            font-size: 70px;
            color: #4CAF50;
            margin-bottom: 25px;
            animation: bounce 1s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .success-text {
            color: #333;
            font-size: 20px;
            margin-bottom: 30px;
            line-height: 1.6;
            font-weight: 500;
        }

        .close-success {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
        }

        .close-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(76, 175, 80, 0.5);
        }

        .close-success:active {
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-title">
            <h1>ç”Ÿæ—¥å¿«ä¹ï¼</h1>
            <p>ç–¯ç‹‚åŠ¨ç‰©åŸä¸»é¢˜ - ä¸“å±å®šåˆ¶æƒŠå–œ</p>
        </div>
        
        <div class="video-container">
            <video id="birthday-video" preload="metadata" playsinline>
                <!-- è¿™é‡Œæ›¿æ¢ä¸ºä½ çš„è§†é¢‘æ–‡ä»¶è·¯å¾„ -->
                <source src="./videos/ç”Ÿæ—¥åŠ¨ç”».mp4" type="video/mp4">
                <source src="your-birthday-video.webm" type="video/webm">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ï¼Œè¯·å°è¯•ä½¿ç”¨ç°ä»£æµè§ˆå™¨ã€‚
            </video>
            
            <div class="video-overlay" id="video-overlay">
                <button class="play-btn" id="play-btn">
                    <i class="fas fa-play"></i>
                </button>
                <div class="play-btn-text">ç‚¹å‡»æ’­æ”¾ç”Ÿæ—¥æƒŠå–œ</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>
    </div>

    <!-- å½©è›‹æŒ‰é’® -->
    <div class="egg-button-container" id="egg-button-container">
        <button class="egg-button" id="egg-button">
            <i class="fas fa-envelope-open-text"></i>
            å¼€å¯ç¥ç§˜ä¿¡ä»¶
        </button>
    </div>

    <!-- ä¿¡å°é¡µé¢ -->
    <div class="letter-page" id="letter-page">
        <div class="letter-container">
            <button class="close-letter" id="close-letter">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="letter-content-wrapper">
                <div class="letter-header">
                    <h1>ç»™æœ€ç‰¹åˆ«çš„ä½ </h1>
                    <p>ç–¯ç‹‚åŠ¨ç‰©åŸä¸»é¢˜ç”Ÿæ—¥ä¿¡ä»¶</p>
                </div>
                
                <div class="letter-content">
                    <p>äº²çˆ±çš„å°å¯¿æ˜ŸğŸ°ï¼š</p>
                    
                    <p>ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼Œæˆ‘æƒ³ç”¨æœ€ç‰¹åˆ«çš„æ–¹å¼ä¸ºä½ åº†ç¥ã€‚å°±åƒã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹é‡Œçš„æœ±è¿ªå’Œå°¼å…‹ï¼Œæˆ‘ä»¬çš„æ•…äº‹ä¹Ÿå……æ»¡äº†æƒŠå–œã€å†’é™©å’Œæ¸©æš–ã€‚</p>
                    
                    <p>è¿˜è®°å¾—æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¸€èµ·çœ‹è¿™éƒ¨ç”µå½±çš„åœºæ™¯å—ï¼Ÿä½ é åœ¨æˆ‘è‚©ä¸Šï¼Œçœ¼ç›äº®æ™¶æ™¶åœ°è¯´ï¼š"æˆ‘ä¹Ÿæƒ³æˆä¸ºæœ±è¿ªé‚£æ ·å‹‡æ•¢çš„è­¦å¯Ÿï¼"é‚£ä¸€åˆ»ï¼Œæˆ‘å°±çŸ¥é“ï¼Œæˆ‘æ‰¾åˆ°äº†æˆ‘çš„å°å…”å­è­¦å®˜ã€‚</p>
                    
                    <p>åœ¨æˆ‘ä»¬è‡ªå·±çš„"åŠ¨ç‰©åŸ"é‡Œï¼Œä½ ç¡®å®åƒæœ±è¿ªä¸€æ ·<span class="highlight">å‹‡æ•¢ã€åšå®š</span>ï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆæŒ‘æˆ˜éƒ½èƒ½å‹‡å¾€ç›´å‰ã€‚è€Œæˆ‘ä¹Ÿå­¦ç€å°¼å…‹ï¼Œä»é‚£ä¸ªæœ‰ç‚¹ç©ä¸–ä¸æ­çš„è‡ªå·±ï¼Œå˜æˆäº†æ„¿æ„ä¸ºä¸€ä¸ªäººè®¤çœŸå®ˆæŠ¤çš„ç‹ç‹¸ã€‚</p>
                    
                    <p>ç”µå½±é‡Œæœ€æ‰“åŠ¨æˆ‘çš„ï¼Œä¸æ˜¯å®ä¼Ÿçš„åŸå¸‚æ™¯è§‚ï¼Œè€Œæ˜¯å°¼å…‹å’Œæœ±è¿ªåˆ†äº«çˆªçˆªå†°æ£çš„å¹³å‡¡ç¬é—´ã€‚å°±åƒæˆ‘ä»¬æ¯æ¬¡åœ¨æ·±å¤œåˆ†äº«ä¸€ç¢—æ³¡é¢ï¼Œåœ¨é›¨å¤©å…±æ’‘ä¸€æŠŠä¼ï¼Œåœ¨ç–²æƒ«æ—¶äº’ç›¸æ‰“æ°”çš„é‚£äº›æ—¶åˆ»ã€‚è¿™äº›ç®€å•çš„æ¸©æš–ï¼Œç»„æˆäº†æˆ‘ä»¬æœ€çè´µçš„"åŠ¨ç‰©åŸ"ã€‚</p>
                    
                    <p>ä½ æ€»è¯´å°¼å…‹æ”¹å˜äº†æœ±è¿ªï¼Œä½†ä½ çŸ¥é“å—ï¼Ÿæ˜¯ä½ æ”¹å˜äº†æˆ‘ã€‚ä½ è®©æˆ‘å­¦ä¼šäº†æ¸©æŸ”ï¼Œå­¦ä¼šäº†åšæŒï¼Œå­¦ä¼šäº†çˆ±ä¸€ä¸ªäººå°±æ˜¯è¦æˆä¸ºå¥¹æœ€åšå®çš„åç›¾ã€‚</p>
                    
                    <p>ç”Ÿæ—¥å¿«ä¹ï¼Œæˆ‘çš„å°æœ±è¿ªï¼æ„¿æ–°çš„ä¸€å²ï¼Œä½ ä¾ç„¶å‹‡æ•¢è¿½æ¢¦ï¼Œè€Œæˆ‘ï¼Œä¼šæ°¸è¿œåœ¨ä½ èº«æ—ï¼Œåšä½ æœ€ä¿¡ä»»çš„æ­æ¡£ã€‚</p>
                    
                    <p>æ„¿æˆ‘ä»¬çš„æ•…äº‹ï¼Œæ°¸è¿œæ¯”ç–¯ç‹‚åŠ¨ç‰©åŸæ›´ç²¾å½©ï¼Œæ›´æœ‰çˆ±ã€‚å› ä¸ºåœ¨è¿™é‡Œï¼Œæ²¡æœ‰"å°è¯•ä¸€åˆ‡"çš„çŠ¹è±«ï¼Œåªæœ‰"ä¸€å®šæ˜¯ä½ "çš„åšå®šã€‚</p>
                </div>
                
                <div class="letter-signature">
                    æ°¸è¿œçˆ±ä½ çš„å°¼å…‹ğŸ¦Š<br>
                    <span style="font-size: 28px; color: #ff6b6b;">ä½ çš„ä¸“å±ç‹ç‹¸å…ˆç”Ÿ</span>
                </div>
            </div>
            
            <div class="letter-actions">
                <button class="action-btn" id="download-pdf">
                    <i class="fas fa-file-pdf"></i>
                    ä¸‹è½½PDFä¿¡ä»¶
                </button>
                <button class="action-btn secondary" id="print-letter">
                    <i class="fas fa-print"></i>
                    æ‰“å°ä¿¡ä»¶
                </button>
            </div>
        </div>
    </div>

    <!-- PDFç”ŸæˆåŠ è½½åŠ¨ç”» -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">æ­£åœ¨ç”ŸæˆPDFä¿¡ä»¶ï¼Œè¯·ç¨å€™...</div>
        </div>
    </div>

    <!-- æˆåŠŸæç¤º -->
    <div class="success-message" id="success-message">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="success-text" id="success-text">PDFä¿¡ä»¶å·²æˆåŠŸç”Ÿæˆï¼</div>
        <button class="close-success" id="close-success">å¥½çš„</button>
    </div>

    <script>
        // DOMå…ƒç´ 
        const video = document.getElementById('birthday-video');
        const videoOverlay = document.getElementById('video-overlay');
        const playBtn = document.getElementById('play-btn');
        const eggButtonContainer = document.getElementById('egg-button-container');
        const eggButton = document.getElementById('egg-button');
        const letterPage = document.getElementById('letter-page');
        const closeLetter = document.getElementById('close-letter');
        const progressBar = document.getElementById('progress-bar');
        const downloadPdfBtn = document.getElementById('download-pdf');
        const printLetterBtn = document.getElementById('print-letter');
        const loadingOverlay = document.getElementById('loading-overlay');
        const successMessage = document.getElementById('success-message');
        const successText = document.getElementById('success-text');
        const closeSuccessBtn = document.getElementById('close-success');
        
        // æ’­æ”¾/æš‚åœè§†é¢‘
        playBtn.addEventListener('click', function() {
            if (video.paused) {
                video.play();
                videoOverlay.classList.add('hidden');
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                video.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        });
        
        // è§†é¢‘æ’­æ”¾è¿›åº¦æ›´æ–°
        video.addEventListener('timeupdate', function() {
            const progress = (video.currentTime / video.duration) * 100;
            progressBar.style.width = progress + '%';
        });
        
        // è§†é¢‘æ’­æ”¾ç»“æŸ
        video.addEventListener('ended', function() {
            // æ˜¾ç¤ºå½©è›‹æŒ‰é’®
            eggButtonContainer.classList.add('show');
            
            // æ’­æ”¾ç»“æŸéŸ³æ•ˆ
            playEndSound();
        });
        
        // å½©è›‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        eggButton.addEventListener('click', function() {
            // æ·»åŠ ç‚¹å‡»æ•ˆæœ
            eggButton.style.transform = 'scale(0.95)';
            setTimeout(() => {
                eggButton.style.transform = '';
            }, 200);
            
            // æ˜¾ç¤ºä¿¡å°é¡µé¢
            letterPage.classList.add('active');
            
            // éšè—å½©è›‹æŒ‰é’®
            eggButtonContainer.classList.remove('show');
            
            // æ’­æ”¾è½¬åœºéŸ³æ•ˆ
            playTransitionSound();
        });
        
        // å…³é—­ä¿¡å°é¡µé¢
        closeLetter.addEventListener('click', function() {
            letterPage.classList.remove('active');
            
            // é‡æ–°æ˜¾ç¤ºå½©è›‹æŒ‰é’®
            setTimeout(() => {
                eggButtonContainer.classList.add('show');
            }, 300);
        });
        
        // ç‚¹å‡»ä¿¡å°é¡µé¢èƒŒæ™¯å…³é—­
        letterPage.addEventListener('click', function(e) {
            if (e.target === letterPage) {
                closeLetter.click();
            }
        });
        
        // PDFä¸‹è½½åŠŸèƒ½
        downloadPdfBtn.addEventListener('click', async function() {
            showLoading();
            
            try {
                await generatePdf();
                hideLoading();
                showSuccess('PDFä¿¡ä»¶å·²æˆåŠŸä¸‹è½½ï¼æ–‡ä»¶åä¸ºï¼šç–¯ç‹‚åŠ¨ç‰©åŸç”Ÿæ—¥ä¿¡ä»¶.pdf');
            } catch (error) {
                console.error('PDFç”Ÿæˆå¤±è´¥:', error);
                hideLoading();
                
                // å°è¯•å¤‡ç”¨æ–¹æ¡ˆ
                try {
                    await generateFallbackTextFile();
                    showSuccess('å·²ç”Ÿæˆæ–‡æœ¬ç‰ˆæœ¬ä¿¡ä»¶ä¾›ä¸‹è½½ï¼');
                } catch (fallbackError) {
                    console.error('å¤‡ç”¨æ–¹æ¡ˆä¹Ÿå¤±è´¥:', fallbackError);
                    showSuccess('æ–‡ä»¶ç”Ÿæˆå¤±è´¥ï¼Œè¯·ä½¿ç”¨æ‰“å°åŠŸèƒ½æˆ–æˆªå›¾ä¿å­˜ã€‚');
                }
            }
        });
        
        // ç”ŸæˆPDFå‡½æ•°
        async function generatePdf() {
            return new Promise((resolve, reject) => {
                try {
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4',
                        compress: true
                    });
                    
                    // è®¾ç½®å­—ä½“
                    pdf.setFont("helvetica");
                    
                    // æ·»åŠ èƒŒæ™¯è‰²ï¼ˆæ¨¡æ‹ŸèƒŒæ™¯æ•ˆæœï¼‰
                    pdf.setFillColor(12, 36, 97);
                    pdf.rect(0, 0, 210, 297, 'F');
                    
                    // æ·»åŠ èƒŒæ™¯æ¸å˜æ•ˆæœ
                    pdf.setGradient(0, 0, 210, 297, 
                        [255, 154, 0], [74, 105, 189], 
                        'axial', [0, 0.5, 1], [0, 0, 0, 1]);
                    
                    // æ·»åŠ ä¿¡ä»¶å®¹å™¨
                    pdf.setFillColor(255, 255, 255, 0.95);
                    pdf.roundedRect(15, 15, 180, 267, 5, 5, 'F');
                    
                    // æ·»åŠ è¾¹æ¡†
                    pdf.setDrawColor(255, 154, 0);
                    pdf.setLineWidth(2);
                    pdf.roundedRect(15, 15, 180, 267, 5, 5);
                    
                    // æ·»åŠ æ ‡é¢˜
                    pdf.setFontSize(28);
                    pdf.setTextColor(12, 36, 97);
                    pdf.text("ç»™æœ€ç‰¹åˆ«çš„ä½ ", 105, 45, { align: 'center' });
                    
                    pdf.setFontSize(16);
                    pdf.setTextColor(102, 102, 102);
                    pdf.text("ç–¯ç‹‚åŠ¨ç‰©åŸä¸»é¢˜ç”Ÿæ—¥ä¿¡ä»¶", 105, 55, { align: 'center' });
                    
                    // æ·»åŠ è£…é¥°çº¿
                    pdf.setDrawColor(255, 154, 0);
                    pdf.setLineWidth(3);
                    pdf.line(60, 60, 150, 60);
                    
                    // æ·»åŠ ä¿¡ä»¶å†…å®¹
                    pdf.setFontSize(12);
                    pdf.setTextColor(51, 51, 51);
                    
                    const letterContent = [
                        "äº²çˆ±çš„å°å¯¿æ˜ŸğŸ°ï¼š",
                        "",
                        "ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼Œæˆ‘æƒ³ç”¨æœ€ç‰¹åˆ«çš„æ–¹å¼ä¸ºä½ åº†ç¥ã€‚å°±åƒã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹é‡Œçš„æœ±è¿ªå’Œå°¼å…‹ï¼Œ",
                        "æˆ‘ä»¬çš„æ•…äº‹ä¹Ÿå……æ»¡äº†æƒŠå–œã€å†’é™©å’Œæ¸©æš–ã€‚",
                        "",
                        "è¿˜è®°å¾—æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¸€èµ·çœ‹è¿™éƒ¨ç”µå½±çš„åœºæ™¯å—ï¼Ÿä½ é åœ¨æˆ‘è‚©ä¸Šï¼Œçœ¼ç›äº®æ™¶æ™¶åœ°è¯´ï¼š",
                        "'æˆ‘ä¹Ÿæƒ³æˆä¸ºæœ±è¿ªé‚£æ ·å‹‡æ•¢çš„è­¦å¯Ÿï¼'é‚£ä¸€åˆ»ï¼Œæˆ‘å°±çŸ¥é“ï¼Œæˆ‘æ‰¾åˆ°äº†æˆ‘çš„å°å…”å­è­¦å®˜ã€‚",
                        "",
                        "åœ¨æˆ‘ä»¬è‡ªå·±çš„'åŠ¨ç‰©åŸ'é‡Œï¼Œä½ ç¡®å®åƒæœ±è¿ªä¸€æ ·å‹‡æ•¢ã€åšå®šï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆæŒ‘æˆ˜éƒ½èƒ½",
                        "å‹‡å¾€ç›´å‰ã€‚è€Œæˆ‘ä¹Ÿå­¦ç€å°¼å…‹ï¼Œä»é‚£ä¸ªæœ‰ç‚¹ç©ä¸–ä¸æ­çš„è‡ªå·±ï¼Œå˜æˆäº†æ„¿æ„ä¸ºä¸€ä¸ªäºº",
                        "è®¤çœŸå®ˆæŠ¤çš„ç‹ç‹¸ã€‚",
                        "",
                        "ç”µå½±é‡Œæœ€æ‰“åŠ¨æˆ‘çš„ï¼Œä¸æ˜¯å®ä¼Ÿçš„åŸå¸‚æ™¯è§‚ï¼Œè€Œæ˜¯å°¼å…‹å’Œæœ±è¿ªåˆ†äº«çˆªçˆªå†°æ£çš„å¹³å‡¡ç¬é—´ã€‚",
                        "å°±åƒæˆ‘ä»¬æ¯æ¬¡åœ¨æ·±å¤œåˆ†äº«ä¸€ç¢—æ³¡é¢ï¼Œåœ¨é›¨å¤©å…±æ’‘ä¸€æŠŠä¼ï¼Œåœ¨ç–²æƒ«æ—¶äº’ç›¸æ‰“æ°”çš„é‚£äº›æ—¶åˆ»ã€‚",
                        "è¿™äº›ç®€å•çš„æ¸©æš–ï¼Œç»„æˆäº†æˆ‘ä»¬æœ€çè´µçš„'åŠ¨ç‰©åŸ'ã€‚",
                        "",
                        "ä½ æ€»è¯´å°¼å…‹æ”¹å˜äº†æœ±è¿ªï¼Œä½†ä½ çŸ¥é“å—ï¼Ÿæ˜¯ä½ æ”¹å˜äº†æˆ‘ã€‚ä½ è®©æˆ‘å­¦ä¼šäº†æ¸©æŸ”ï¼Œ",
                        "å­¦ä¼šäº†åšæŒï¼Œå­¦ä¼šäº†çˆ±ä¸€ä¸ªäººå°±æ˜¯è¦æˆä¸ºå¥¹æœ€åšå®çš„åç›¾ã€‚",
                        "",
                        "ç”Ÿæ—¥å¿«ä¹ï¼Œæˆ‘çš„å°æœ±è¿ªï¼æ„¿æ–°çš„ä¸€å²ï¼Œä½ ä¾ç„¶å‹‡æ•¢è¿½æ¢¦ï¼Œè€Œæˆ‘ï¼Œä¼šæ°¸è¿œåœ¨ä½ èº«æ—ï¼Œ",
                        "åšä½ æœ€ä¿¡ä»»çš„æ­æ¡£ã€‚",
                        "",
                        "æ„¿æˆ‘ä»¬çš„æ•…äº‹ï¼Œæ°¸è¿œæ¯”ç–¯ç‹‚åŠ¨ç‰©åŸæ›´ç²¾å½©ï¼Œæ›´æœ‰çˆ±ã€‚å› ä¸ºåœ¨è¿™é‡Œï¼Œ",
                        "æ²¡æœ‰'å°è¯•ä¸€åˆ‡'çš„çŠ¹è±«ï¼Œåªæœ‰'ä¸€å®šæ˜¯ä½ 'çš„åšå®šã€‚"
                    ];
                    
                    // é€è¡Œæ·»åŠ æ–‡æœ¬
                    let y = 75;
                    const lineHeight = 7;
                    const margin = 25;
                    const maxWidth = 160;
                    
                    letterContent.forEach(line => {
                        if (y > 220) {
                            pdf.addPage();
                            pdf.setFillColor(12, 36, 97);
                            pdf.rect(0, 0, 210, 297, 'F');
                            pdf.setFillColor(255, 255, 255, 0.95);
                            pdf.roundedRect(15, 15, 180, 267, 5, 5, 'F');
                            y = 40;
                        }
                        
                        if (line.trim() === "") {
                            y += lineHeight;
                        } else {
                            const lines = pdf.splitTextToSize(line, maxWidth);
                            pdf.text(lines, margin, y);
                            y += lines.length * lineHeight;
                        }
                    });
                    
                    // æ·»åŠ ç­¾å
                    y = Math.min(y + 20, 240);
                    pdf.setFontSize(22);
                    pdf.setTextColor(12, 36, 97);
                    pdf.setFont("times", "italic");
                    pdf.text("æ°¸è¿œçˆ±ä½ çš„å°¼å…‹ğŸ¦Š", 170, y, { align: 'right' });
                    
                    y += 10;
                    pdf.setFontSize(18);
                    pdf.setTextColor(255, 107, 107);
                    pdf.text("ä½ çš„ä¸“å±ç‹ç‹¸å…ˆç”Ÿ", 170, y, { align: 'right' });
                    
                    // æ·»åŠ é¡µè„š
                    pdf.setFontSize(10);
                    pdf.setTextColor(136, 136, 136);
                    pdf.setFont("helvetica");
                    
                    const now = new Date();
                    const dateStr = now.toLocaleDateString('zh-CN');
                    pdf.text(`æ­¤ä¿¡ä»¶ä¸ºä¸“å±å®šåˆ¶ï¼Œä»…æ­¤ä¸€ä»½ | ä¿å­˜æ—¥æœŸ: ${dateStr}`, 105, 280, { align: 'center' });
                    
                    // ä¿å­˜PDF
                    pdf.save('ç–¯ç‹‚åŠ¨ç‰©åŸç”Ÿæ—¥ä¿¡ä»¶.pdf');
                    
                    resolve();
                    
                } catch (error) {
                    reject(error);
                }
            });
        }
        
        // å¤‡ç”¨æ–¹æ¡ˆï¼šåˆ›å»ºæ–‡æœ¬æ–‡ä»¶ä¸‹è½½
        async function generateFallbackTextFile() {
            return new Promise((resolve, reject) => {
                try {
                    const letterText = `
âœ¨ ç–¯ç‹‚åŠ¨ç‰©åŸä¸»é¢˜ç”Ÿæ—¥ä¿¡ä»¶ âœ¨

ç»™æœ€ç‰¹åˆ«çš„ä½ 

äº²çˆ±çš„å°å¯¿æ˜ŸğŸ°ï¼š

ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼Œæˆ‘æƒ³ç”¨æœ€ç‰¹åˆ«çš„æ–¹å¼ä¸ºä½ åº†ç¥ã€‚å°±åƒã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹é‡Œçš„æœ±è¿ªå’Œå°¼å…‹ï¼Œæˆ‘ä»¬çš„æ•…äº‹ä¹Ÿå……æ»¡äº†æƒŠå–œã€å†’é™©å’Œæ¸©æš–ã€‚

è¿˜è®°å¾—æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¸€èµ·çœ‹è¿™éƒ¨ç”µå½±çš„åœºæ™¯å—ï¼Ÿä½ é åœ¨æˆ‘è‚©ä¸Šï¼Œçœ¼ç›äº®æ™¶æ™¶åœ°è¯´ï¼š"æˆ‘ä¹Ÿæƒ³æˆä¸ºæœ±è¿ªé‚£æ ·å‹‡æ•¢çš„è­¦å¯Ÿï¼"é‚£ä¸€åˆ»ï¼Œæˆ‘å°±çŸ¥é“ï¼Œæˆ‘æ‰¾åˆ°äº†æˆ‘çš„å°å…”å­è­¦å®˜ã€‚

åœ¨æˆ‘ä»¬è‡ªå·±çš„"åŠ¨ç‰©åŸ"é‡Œï¼Œä½ ç¡®å®åƒæœ±è¿ªä¸€æ ·å‹‡æ•¢ã€åšå®šï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆæŒ‘æˆ˜éƒ½èƒ½å‹‡å¾€ç›´å‰ã€‚è€Œæˆ‘ä¹Ÿå­¦ç€å°¼å…‹ï¼Œä»é‚£ä¸ªæœ‰ç‚¹ç©ä¸–ä¸æ­çš„è‡ªå·±ï¼Œå˜æˆäº†æ„¿æ„ä¸ºä¸€ä¸ªäººè®¤çœŸå®ˆæŠ¤çš„ç‹ç‹¸ã€‚

ç”µå½±é‡Œæœ€æ‰“åŠ¨æˆ‘çš„ï¼Œä¸æ˜¯å®ä¼Ÿçš„åŸå¸‚æ™¯è§‚ï¼Œè€Œæ˜¯å°¼å…‹å’Œæœ±è¿ªåˆ†äº«çˆªçˆªå†°æ£çš„å¹³å‡¡ç¬é—´ã€‚å°±åƒæˆ‘ä»¬æ¯æ¬¡åœ¨æ·±å¤œåˆ†äº«ä¸€ç¢—æ³¡é¢ï¼Œåœ¨é›¨å¤©å…±æ’‘ä¸€æŠŠä¼ï¼Œåœ¨ç–²æƒ«æ—¶äº’ç›¸æ‰“æ°”çš„é‚£äº›æ—¶åˆ»ã€‚è¿™äº›ç®€å•çš„æ¸©æš–ï¼Œç»„æˆäº†æˆ‘ä»¬æœ€çè´µçš„"åŠ¨ç‰©åŸ"ã€‚

ä½ æ€»è¯´å°¼å…‹æ”¹å˜äº†æœ±è¿ªï¼Œä½†ä½ çŸ¥é“å—ï¼Ÿæ˜¯ä½ æ”¹å˜äº†æˆ‘ã€‚ä½ è®©æˆ‘å­¦ä¼šäº†æ¸©æŸ”ï¼Œå­¦ä¼šäº†åšæŒï¼Œå­¦ä¼šäº†çˆ±ä¸€ä¸ªäººå°±æ˜¯è¦æˆä¸ºå¥¹æœ€åšå®çš„åç›¾ã€‚

ç”Ÿæ—¥å¿«ä¹ï¼Œæˆ‘çš„å°æœ±è¿ªï¼æ„¿æ–°çš„ä¸€å²ï¼Œä½ ä¾ç„¶å‹‡æ•¢è¿½æ¢¦ï¼Œè€Œæˆ‘ï¼Œä¼šæ°¸è¿œåœ¨ä½ èº«æ—ï¼Œåšä½ æœ€ä¿¡ä»»çš„æ­æ¡£ã€‚

æ„¿æˆ‘ä»¬çš„æ•…äº‹ï¼Œæ°¸è¿œæ¯”ç–¯ç‹‚åŠ¨ç‰©åŸæ›´ç²¾å½©ï¼Œæ›´æœ‰çˆ±ã€‚å› ä¸ºåœ¨è¿™é‡Œï¼Œæ²¡æœ‰"å°è¯•ä¸€åˆ‡"çš„çŠ¹è±«ï¼Œåªæœ‰"ä¸€å®šæ˜¯ä½ "çš„åšå®šã€‚

âœ¨ âœ¨ âœ¨ âœ¨ âœ¨ âœ¨ âœ¨ âœ¨

æ°¸è¿œçˆ±ä½ çš„å°¼å…‹ğŸ¦Š
ä½ çš„ä¸“å±ç‹ç‹¸å…ˆç”Ÿ

ä¿å­˜æ—¥æœŸ: ${new Date().toLocaleDateString('zh-CN')}
                    `;
                    
                    const blob = new Blob([letterText], { type: 'text/plain;charset=utf-8' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'ç–¯ç‹‚åŠ¨ç‰©åŸç”Ÿæ—¥ä¿¡ä»¶.txt';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    resolve();
                } catch (error) {
                    reject(error);
                }
            });
        }
        
        // æ‰“å°åŠŸèƒ½
        printLetterBtn.addEventListener('click', function() {
            const printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>æ‰“å°ç”Ÿæ—¥ä¿¡ä»¶</title>
                    <meta charset="UTF-8">
                    <style>
                        @media print {
                            @page {
                                size: A4;
                                margin: 20mm;
                            }
                            body {
                                background: linear-gradient(135deg, #0c2461, #1e3799, #4a69bd);
                                background-image: url('your-background-image.jpg');
                                background-size: cover;
                                background-position: center;
                                min-height: 100vh;
                                padding: 40px;
                                font-family: 'Microsoft YaHei', sans-serif;
                                line-height: 1.8;
                                color: #333;
                                position: relative;
                            }
                            body::before {
                                content: '';
                                position: absolute;
                                top: 0;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                background: rgba(255, 255, 255, 0.9);
                                z-index: 1;
                            }
                        }
                        .print-container {
                            max-width: 800px;
                            margin: 0 auto;
                            padding: 50px;
                            background: white;
                            border-radius: 20px;
                            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                            border: 8px solid transparent;
                            background-image: linear-gradient(white, white), 
                                              linear-gradient(135deg, #ff9a00, #ff6b6b, #4a69bd);
                            background-origin: border-box;
                            background-clip: padding-box, border-box;
                            position: relative;
                            z-index: 2;
                        }
                        .print-header {
                            text-align: center;
                            margin-bottom: 40px;
                            padding-bottom: 20px;
                            border-bottom: 3px solid #ff9a00;
                        }
                        .print-header h1 {
                            color: #0c2461;
                            font-size: 36px;
                            margin-bottom: 10px;
                        }
                        .print-content {
                            font-size: 18px;
                            margin-bottom: 40px;
                            padding: 20px;
                            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8));
                            border-radius: 10px;
                        }
                        .print-signature {
                            text-align: right;
                            margin-top: 60px;
                            font-family: 'Brush Script MT', cursive;
                            font-size: 28px;
                            color: #0c2461;
                            border-top: 1px solid #eee;
                            padding-top: 20px;
                        }
                        .print-footer {
                            text-align: center;
                            margin-top: 40px;
                            color: #888;
                            font-size: 14px;
                            border-top: 1px dashed #ddd;
                            padding-top: 20px;
                        }
                    </style>
                </head>
                <body>
                    <div class="print-container">
                        <div class="print-header">
                            <h1>ç»™æœ€ç‰¹åˆ«çš„ä½ </h1>
                            <p>ç–¯ç‹‚åŠ¨ç‰©åŸä¸»é¢˜ç”Ÿæ—¥ä¿¡ä»¶</p>
                        </div>
                        
                        <div class="print-content">
                            <p>äº²çˆ±çš„å°å¯¿æ˜ŸğŸ°ï¼š</p>
                            
                            <p>ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼Œæˆ‘æƒ³ç”¨æœ€ç‰¹åˆ«çš„æ–¹å¼ä¸ºä½ åº†ç¥ã€‚å°±åƒã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹é‡Œçš„æœ±è¿ªå’Œå°¼å…‹ï¼Œæˆ‘ä»¬çš„æ•…äº‹ä¹Ÿå……æ»¡äº†æƒŠå–œã€å†’é™©å’Œæ¸©æš–ã€‚</p>
                            
                            <p>è¿˜è®°å¾—æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¸€èµ·çœ‹è¿™éƒ¨ç”µå½±çš„åœºæ™¯å—ï¼Ÿä½ é åœ¨æˆ‘è‚©ä¸Šï¼Œçœ¼ç›äº®æ™¶æ™¶åœ°è¯´ï¼š"æˆ‘ä¹Ÿæƒ³æˆä¸ºæœ±è¿ªé‚£æ ·å‹‡æ•¢çš„è­¦å¯Ÿï¼"é‚£ä¸€åˆ»ï¼Œæˆ‘å°±çŸ¥é“ï¼Œæˆ‘æ‰¾åˆ°äº†æˆ‘çš„å°å…”å­è­¦å®˜ã€‚</p>
                            
                            <p>åœ¨æˆ‘ä»¬è‡ªå·±çš„"åŠ¨ç‰©åŸ"é‡Œï¼Œä½ ç¡®å®åƒæœ±è¿ªä¸€æ ·<strong>å‹‡æ•¢ã€åšå®š</strong>ï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆæŒ‘æˆ˜éƒ½èƒ½å‹‡å¾€ç›´å‰ã€‚è€Œæˆ‘ä¹Ÿå­¦ç€å°¼å…‹ï¼Œä»é‚£ä¸ªæœ‰ç‚¹ç©ä¸–ä¸æ­çš„è‡ªå·±ï¼Œå˜æˆäº†æ„¿æ„ä¸ºä¸€ä¸ªäººè®¤çœŸå®ˆæŠ¤çš„ç‹ç‹¸ã€‚</p>
                            
                            <p>ç”µå½±é‡Œæœ€æ‰“åŠ¨æˆ‘çš„ï¼Œä¸æ˜¯å®ä¼Ÿçš„åŸå¸‚æ™¯è§‚ï¼Œè€Œæ˜¯å°¼å…‹å’Œæœ±è¿ªåˆ†äº«çˆªçˆªå†°æ£çš„å¹³å‡¡ç¬é—´ã€‚å°±åƒæˆ‘ä»¬æ¯æ¬¡åœ¨æ·±å¤œåˆ†äº«ä¸€ç¢—æ³¡é¢ï¼Œåœ¨é›¨å¤©å…±æ’‘ä¸€æŠŠä¼ï¼Œåœ¨ç–²æƒ«æ—¶äº’ç›¸æ‰“æ°”çš„é‚£äº›æ—¶åˆ»ã€‚è¿™äº›ç®€å•çš„æ¸©æš–ï¼Œç»„æˆäº†æˆ‘ä»¬æœ€çè´µçš„"åŠ¨ç‰©åŸ"ã€‚</p>
                            
                            <p>ä½ æ€»è¯´å°¼å…‹æ”¹å˜äº†æœ±è¿ªï¼Œä½†ä½ çŸ¥é“å—ï¼Ÿæ˜¯ä½ æ”¹å˜äº†æˆ‘ã€‚ä½ è®©æˆ‘å­¦ä¼šäº†æ¸©æŸ”ï¼Œå­¦ä¼šäº†åšæŒï¼Œå­¦ä¼šäº†çˆ±ä¸€ä¸ªäººå°±æ˜¯è¦æˆä¸ºå¥¹æœ€åšå®çš„åç›¾ã€‚</p>
                            
                            <p>ç”Ÿæ—¥å¿«ä¹ï¼Œæˆ‘çš„å°æœ±è¿ªï¼æ„¿æ–°çš„ä¸€å²ï¼Œä½ ä¾ç„¶å‹‡æ•¢è¿½æ¢¦ï¼Œè€Œæˆ‘ï¼Œä¼šæ°¸è¿œåœ¨ä½ èº«æ—ï¼Œåšä½ æœ€ä¿¡ä»»çš„æ­æ¡£ã€‚</p>
                            
                            <p>æ„¿æˆ‘ä»¬çš„æ•…äº‹ï¼Œæ°¸è¿œæ¯”ç–¯ç‹‚åŠ¨ç‰©åŸæ›´ç²¾å½©ï¼Œæ›´æœ‰çˆ±ã€‚å› ä¸ºåœ¨è¿™é‡Œï¼Œæ²¡æœ‰"å°è¯•ä¸€åˆ‡"çš„çŠ¹è±«ï¼Œåªæœ‰"ä¸€å®šæ˜¯ä½ "çš„åšå®šã€‚</p>
                        </div>
                        
                        <div class="print-signature">
                            æ°¸è¿œçˆ±ä½ çš„å°¼å…‹ğŸ¦Š<br>
                            <span style="color: #ff6b6b;">ä½ çš„ä¸“å±ç‹ç‹¸å…ˆç”Ÿ</span>
                        </div>
                        
                        <div class="print-footer">
                            æ­¤ä¿¡ä»¶ä¸ºä¸“å±å®šåˆ¶ï¼Œä»…æ­¤ä¸€ä»½ | ä¿å­˜æ—¥æœŸ: ${new Date().toLocaleDateString('zh-CN')}
                        </div>
                    </div>
                    
                    <script>
                        window.onload = function() {
                            window.print();
                            setTimeout(function() {
                                window.close();
                            }, 1000);
                        };
                    <\/script>
                </body>
                </html>
            `;
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(printContent);
            printWindow.document.close();
        });
        
        // è§†é¢‘ç‚¹å‡»æ’­æ”¾/æš‚åœ
        video.addEventListener('click', function() {
            if (video.paused) {
                video.play();
                videoOverlay.classList.add('hidden');
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                video.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        });
        
        // é”®ç›˜å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', function(e) {
            // ç©ºæ ¼é”®æ’­æ”¾/æš‚åœ
            if (e.code === 'Space') {
                e.preventDefault();
                if (video.paused) {
                    video.play();
                    videoOverlay.classList.add('hidden');
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    video.pause();
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            }
            
            // ESCé”®å…³é—­ä¿¡å°é¡µé¢
            if (e.code === 'Escape' && letterPage.classList.contains('active')) {
                closeLetter.click();
            }
            
            // å›è½¦é”®è§¦å‘å½©è›‹æŒ‰é’®ï¼ˆå½“å½©è›‹æŒ‰é’®æ˜¾ç¤ºæ—¶ï¼‰
            if (e.code === 'Enter' && eggButtonContainer.classList.contains('show')) {
                eggButton.click();
            }
            
            // Pé”®æ‰“å°ï¼ˆå½“åœ¨ä¿¡å°é¡µé¢æ—¶ï¼‰
            if (e.code === 'KeyP' && letterPage.classList.contains('active') && !e.ctrlKey) {
                e.preventDefault();
                printLetterBtn.click();
            }
        });
        
        // è§†é¢‘åŠ è½½é”™è¯¯å¤„ç†
        video.addEventListener('error', function() {
            alert("è§†é¢‘åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥è§†é¢‘æ–‡ä»¶è·¯å¾„æˆ–æ ¼å¼ã€‚");
            console.error("è§†é¢‘åŠ è½½é”™è¯¯ï¼Œè¯·ç¡®ä¿è§†é¢‘æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®ã€‚");
        });
        
        // æˆåŠŸæç¤ºå…³é—­
        closeSuccessBtn.addEventListener('click', function() {
            successMessage.classList.remove('active');
        });
        
        // å·¥å…·å‡½æ•°
        function playEndSound() {
            const audio = new Audio();
            audio.src = "https://assets.mixkit.co/sfx/preview/mixkit-magic-sparkles-300.mp3";
            audio.volume = 0.3;
            audio.play().catch(e => console.log("éŸ³æ•ˆæ’­æ”¾å¤±è´¥:", e));
        }
        
        function playTransitionSound() {
            const audio = new Audio();
            audio.src = "https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3";
            audio.volume = 0.4;
            audio.play().catch(e => console.log("è½¬åœºéŸ³æ•ˆæ’­æ”¾å¤±è´¥:", e));
        }
        
        function showLoading() {
            loadingOverlay.classList.add('active');
        }
        
        function hideLoading() {
            loadingOverlay.classList.remove('active');
        }
        
        function showSuccess(message) {
            successText.textContent = message;
            successMessage.classList.add('active');
        }
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®è§†é¢‘éŸ³é‡
            video.volume = 0.7;
        });
    </script>
</body>
</html>